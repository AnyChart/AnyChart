language: java
jdk:
  - oraclejdk8

git:
  submodules: false
  depth: 1

before_install:
  - git submodule update --init
  - ./build.py libs
  - pip install maxcdn --user

script: 
  - ./build.py compile
  - ./build.py css
  - ls -lah /home/travis/build/AnyChart/AnyChart/out/

after_success:
  - echo -e "//registry.npmjs.org/:_authToken=$NPM_TOKEN\n" >> ~/.npmrc
  - echo -e "Host $STATIC_HOST\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
  - ./bin/export_version.sh
  - ./bin/upload_dev_files.sh
  - ./bin/upload_release_files.sh
