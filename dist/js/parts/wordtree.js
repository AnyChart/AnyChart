if(!_.wordtree){_.wordtree=1;(function($){var X3=function(){$.V.call(this);$.T(this.ua,wpa)},Y3=function(a,b){$.ux.call(this);$.su(this,this,this.If,this.hg,this.Ds,this.If,null,null);this.Ir=null;this.Ou=[];this.Jh=[];this.ZO=this.dM=null;this.Xf=[];this.nt=[];$.T(this.ua,[["minFontSize",4,1],["maxFontSize",4,1],["postfix",4,1],["fontFamily",4,1],["fontStyle",16,1],["fontWeight",4,1],["fontColor",16,1],["fontOpacity",16,1],["fontDecoration",16,1]]);this.data(a,b)},xpa=function(a,b){var c=b.getParent();if(c){for(var d=0;d<c.bc();d++){var e=
c.xd(d);e!=b&&e.j("hidden",!0)}xpa(a,c)}},ypa=function(a){for(var b=0;b<a.Jh.length;b++)a.Jh[b].j("hidden",!1)},zpa=function(a,b,c){if(c.length){for(var d=b.Sl(),e=!1,f=0;f<b.bc();f++)if(d[f].get("value")==c[0]){e=!0;break}e?(c.shift(),b=d[f]):(b=b.hc({value:c[0]}),c.shift());return zpa(a,b,c)}return b},Apa=function(a){a=a.split(/\s*(.+?(?:[?!]+|$|\.(?=\s+[A-Z]|$)))\s*/);return a=(0,$.Ye)(a,function(a){return!!a.length})},Z3=function(a){a=a.split(/([!?,;:.&"-]+|\S*[A-Z]\.|\S*(?:[^!?,;:.\s&-]))/);
return a=(0,$.Ye)(a,function(a){return a.length&&" "!=a})},Bpa=function(a,b){null!=a.la&&($.kr(a.la,a.dd,a),a.la.ld());a.la=b;$.K(a.la,a.dd,a);a.B(4100,1)},Cpa=function(a,b,c){if(b){var d=b.get("fontSize");if(null==d){if((d=b.getParent())&&(1==d.bc()||c))return d=Cpa(a,d,c),b.j("fontSize",d),d;c=a.g("maxFontSize");a=a.g("minFontSize");d=b.j("height")/1.5;d=$.Za(d,a,c);b.j("fontSize",d)}return d}return 0},Dpa=function(a,b){if(b){var c=b.bc(),d=0;if(c)for(var e=0;e<c;e++)d+=Dpa(a,b.xd(e));else d=b.get("weight")||
1;b.j("leafCount",d).j("weight",d);return d}return 0},Epa=function(a,b,c,d,e,f){if(b){b.j("connectorInXPosition",c[0]).j("connectorInYPosition",c[1]).j("connectorOutXPosition",c[0]+a.HW(b)).j("connectorOutYPosition",c[1]);var h=a.kg.cb();if(d<h){c=a.nj();var k=b.bc(),l=c.g("length"),m=c.g("offset");c=c.g("curveFactor");var n=a.g("minFontSize");if(k){if(1<k){var q=n/10;e+=q;f-=q}q=e;for(var r=!1,t,u=0;u<k;u++)if(t=b.xd(u),t.j("hidden")){r=!0;break}if((f-e)/k<1.5*n&&1<k){k="+"+b.j("leafCount")+" "+
a.g("postfix");var v=(f+e)/2;m=d;d=a.$x(m,v,k,b.j("fontSize")||n,a.g("fontFamily"),a.g("fontWeight"));v-=d.rH()/2;d.y(v);d.tag.node=b;d.tag.o3=!0;k=d.vU();m+k>=h&&d.visible(!1);a.Jt(b.j("connectorOutXPosition"),b.j("connectorOutYPosition"),b.j("connectorOutXPosition")+20,(f+e)/2,c)}else for(r&&(d-=l+m),u=0;u<k;u++)if(t=b.xd(u),!t.j("hidden")){m=t.j("leafCount");h=b.j("leafCount");h=r?f-e:(f-e)*Math.max(1,m)/Math.max(1,h);n=q;var w=0;q=n+h;m=d;v=n+h/2;var x=[m,v];t.j("height",h).j("nodePositionX",
m).j("nodePositionY",v);a.ZL(t,r);v=b.j("textHeight")/2;x[1]-=v;1!=t.bc()&&(w+=l);m=a.HW(t);v=[x[0],x[1]+v];w+=x[0]+m;Epa(a,t,v,w,n,n+h);1<b.bc()&&!r&&a.Jt(b.j("connectorOutXPosition"),b.j("connectorOutYPosition"),t.j("connectorInXPosition"),t.j("connectorInYPosition"),c)}}}}},Fpa=function(a,b){var c=new Y3(a,b);c.Ga("wordtree");return c};$.H(X3,$.V);var $3={};$.sq($3,[[0,"curveFactor",$.er],[0,"offset",$.br],[0,"length",$.br],[1,"stroke",$.Pq]]);$.U(X3,$3);X3.prototype.ra=8201;
var wpa=[["curveFactor",0,8],["offset",0,8],["length",0,8],["stroke",0,8192]];X3.prototype.F=function(){var a=X3.u.F.call(this);$.Tq(this,$3,a);return a};X3.prototype.U=function(a,b){X3.u.U.call(this,a,b);$.Iq(this,$3,a,b)};$.H(Y3,$.ux);Y3.prototype.ra=$.ux.prototype.ra;Y3.prototype.sa=$.ux.prototype.sa|4112;var a4=function(){var a={};$.sq(a,[[0,"minFontSize",$.br],[0,"maxFontSize",$.br],[0,"fontFamily",$.zq],[0,"fontStyle",$.cl],[0,"fontWeight",$.wq],[0,"fontColor",$.Aq],[0,"fontOpacity",$.Bq],[0,"fontDecoration",$.bl],[0,"postfix",function(a){if($.p(a))return null===a&&(a=this.vf("postfix")),String(a)}]]);return a}();$.U(Y3,a4);$.g=Y3.prototype;$.g.Ma=function(){return"wordtree"};
$.g.yj=function(){return!(this.la&&(!this.la||this.la.bc()))};$.g.Ue=function(){return[]};$.g.ts=function(){return[this]};$.g.sV=function(a,b){return function(c){return a*(1-c)+b*c}};$.g.Zj=function(a,b){return $.qu(this.data(),b)};$.g.nj=function(a){this.Kj||(this.Kj=new X3,$.W(this,"connectors",this.Kj),$.K(this.Kj,this.Lia,this));return a?(this.Kj.N(a),this):this.Kj};
$.g.Ux=function(a){this.Si||(this.Si=new $.Fw);var b={};a&&(b.value={value:a.get("value"),type:"string"},b.weight={value:a.j("weight"),type:"number"});this.Si.lg(a);return $.ov(this.Si,b)};$.g.jr=function(a){if(a){"array"==$.ka(a)&&(a=a[0]);if(!$.J(a,$.du)&&(a=this.data().Eo("value",a)[0],!a))return;this.dM=a;xpa(this,a);this.B(20,1)}};$.g.ay=function(){ypa(this);this.dM&&this.dM.getParent()&&this.jr(this.dM.getParent());return this};
$.g.Lia=function(a){var b=0;$.X(a,8192)&&(b|=16);$.X(a,8)&&(b|=4);this.B(b,1)};$.g.dd=function(a){$.X(a,16)&&this.B(4100,9)};$.g.Ds=function(a){a.button==$.Ri&&(a=a.domTarget.tag)&&a.node&&(ypa(this),this.jr(a.node))};$.g.If=function(a){var b=a.domTarget.tag;if(b&&b.node&&!b.o3){var c=b.node;b=this.Ua();$.Ow(b,a.clientX,a.clientY,this.Ux(c))}else this.Ua().Lc()};$.g.hg=function(){this.Ua().Lc()};
$.g.QY=function(a){if("implicit"==this.re){if($.p(a)){if(this.ZO!=a||this.C1){this.C1=!1;if(null===a||/^[\s\xa0]*$/.test(a))a=this.nw[0][0];this.ZO=a;for(var b=[],c=0;c<this.nw.length;c++){var d=(0,$.za)(this.nw[c],a);-1!=d&&b.push($.Ja(this.nw[c],d))}b.length||(b[0]=[a]);a=b[0][0];this.data().ka();this.data().bc()&&this.data().Cj(0);c={value:a};c=this.data().Eg(c,0);for(d=0;d<b.length;d++){var e=b[d];e[0]==a&&(e.shift(),zpa(this,c,e))}this.data().da(!0)}return this}return this.ZO}return this};
$.g.data=function(a,b){if($.p(a)){if($.J(a,$.au)||$.J(a,$.Yt))this.la!=a&&(this.la&&$.kr(this.la,this.dd,this),this.la=a,$.K(this.la,this.dd,this),this.re="explicit",this.B(4100,1));else if("array"==$.ka(a)&&"object"==$.ka(a[0]))this.data($.ou(a,b));else if(null===a)this.la&&($.kr(this.la,this.dd),this.la.ld()),this.la=null,this.B(4100,1);else{this.re="implicit";this.Xf=a;if("array"==$.ka(a)&&a.length)if(this.nw=[],"array"==$.ka(a[0]))for(var c=0;c<a.length;c++)this.nw.push(Z3(a[c][0]));else{if("string"==
$.ka(a[0]))for(c=0;c<a.length;c++)this.nw.push(Z3(a[c]))}else if("string"==$.ka(a)){c=Apa(a);for(var d=[],e=0;e<c.length;e++)d.push(Z3(c[e]));this.nw=d}else this.nw=[[a.toString()]];this.la||Bpa(this,$.ou());this.C1=!0;this.QY(this.nw[0][0])}return this}return this.la};$.g.Rh=function(){var a;0<this.nt.length?a=this.nt.pop():a=new $.Qh;return a};$.g.HW=function(a){if(a){var b=a.j("textWidth"),c=this.nj().g("offset"),d=a.getParent();d&&1<d.bc()&&(b+=c);1<a.bc()&&(b+=c);return b}return 0};
$.g.depth=function(a){if(a){var b=a.bc(),c=0,d=a.getParent();d&&(c=d.j("depth")+1);a.j("depth",c);for(c=0;c<b;c++)this.depth(a.xd(c))}};$.g.$x=function(a,b,c,d,e,f){var h=this.Rh();h.tag||(h.tag={});h.text(c);h.y(b);h.x(a);h.fontSize(d);h.fontFamily(e);h.fontWeight(f);h.width(null);h.visible(!0);this.Ou.push(h);return h};$.g.Jt=function(a,b,c,d,e){var f=this.OC,h=this.sV(a,c),k=h(e);e=h(1-e);f.moveTo(a,b).Sk(k,b,e,d,c,d)};
$.g.ZL=function(a,b){var c=0,d=a.getParent();d&&1<d.bc()&&(c+=this.nj().g("offset"));var e=a.get("value");1==a.bc()&&(e+=" ");c=a.j("nodePositionX")+c;d=a.j("nodePositionY");var f=a.get("fontFamily")||this.g("fontFamily");var h=a.get("fontWeight")||this.g("fontWeight");var k=Cpa(this,a,b);f=this.$x(c,d,e,k,f,h);f.tag={node:a,type:"node",o3:!1};h=f.rH();e=f.vU();a.j("textHeight",h).j("textWidth",e);d-=h/2;h=c+e;k=this.kg.cb();h>k&&f.width(e-(h-k)-.05*e);f.x(c).y(d)};
$.g.Qh=function(a){if(!this.pf())if(this.Aa||(this.Aa=this.Na.Bd(),this.OC=new $.Ag,this.Aa.zIndex(30)),this.yj())this.Aa.Gi();else{var b=this.Ir=this.la.xd(0);this.J(4096)&&(Dpa(this,this.Ir),this.depth(this.Ir),this.Jh.length=0,this.Jh=this.data().aw().uC(),this.I(4096));if(this.J(4)){this.Aa.Gi();var c=a.left;var d=a.top;a=a.height;for(var e=this.nj(),f=e.g("offset"),h=0;h<this.Ou.length;h++){var k=this.Ou[h];this.nt.push(k)}this.Ou.length=0;this.OC.clear();this.Aa.suspend();k=[c+f,d+a/2];b.j("nodePositionX",
k[0]).j("nodePositionY",k[1]).j("height",a);this.ZL(b,!1);c=c+f+this.HW(b)+(1<b.bc()?e.g("length"):0);Epa(this,b,k,c,d,d+a);this.OC.parent(this.Aa);this.I(4);for(h=0;h<this.Ou.length;h++)this.Ou[h].parent(this.Aa);this.Aa.resume();this.B(16)}if(this.J(16)){this.Aa.suspend();this.OC.stroke(this.nj().g("stroke"));d=this.g("fontColor");c=this.g("fontDecoration");a=this.g("fontStyle");e=this.g("fontOpacity");for(f=0;f<this.Ou.length;f++){b=this.Ou[f];if(b.tag&&b.tag.node){var l=b.tag.node;var m=l.get("fontColor")||
d;var n=l.get("fontDecoration")||c;var q=l.get("fontStyle")||a;l=l.get("fontOpacity")||e}b.color(m);b.er(n);b.fontStyle(q);b.opacity(l);b.Hm(!1)}this.Aa.resume();this.I(16)}}};$.g.F=function(){var a=Y3.u.F.call(this);$.Tq(this,a4,a);"implicit"==this.re&&(a.wordTreeRawData=JSON.stringify(this.Xf),a.word=this.ZO);a.treeData=this.data().xB(["hidden"]);a.connectors=this.nj().F();return{chart:a}};
$.g.U=function(a,b){Y3.u.U.call(this,a,b);$.Iq(this,a4,a,b);"wordTreeRawData"in a?(this.data(JSON.parse(a.wordTreeRawData)),"word"in a&&this.QY(a.word),"treeData"in a&&Bpa(this,$.cu(a.treeData))):"treeData"in a&&this.data($.cu(a.treeData));"connectors"in a&&this.nj().ga(!!b,a.connectors)};$.g.R=function(){Y3.u.R.call(this);$.sd(this.Kj,this.OC,this.Ou,this.nt,this.la,this.Aa);this.la=this.OC=this.Kj=null;this.Ou.length=0;this.nt.length=0;this.Aa=null};var b4=Y3.prototype;b4.connectors=b4.nj;
b4.word=b4.QY;b4.getType=b4.Ma;b4.drillTo=b4.jr;b4.drillUp=b4.ay;b4.toCsv=b4.Zj;b4.noData=b4.Gm;$.Tp.wordtree=Fpa;$.E("anychart.wordtree",Fpa);}).call(this,$)}
